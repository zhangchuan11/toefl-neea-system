/*
 * Copyright (c) 2020. 教育部教育考试院版权所有 保留所有权利
 */

! function() {
    var t = window.layui && layui.define,
        o = {
            getPath: function() {
                var z = document.currentScript ? document.currentScript.src : function() {
                    var C = document.scripts,
                        B = C.length - 1,
                        D;
                    for (var A = B; A > 0; A--) {
                        if (C[A].readyState === "interactive") {
                            D = C[A].src;
                            break
                        }
                    }
                    return D || C[B].src
                }();
                return z.substring(0, z.lastIndexOf("/") + 1)
            }(),
            getStyle: function(B, z) {
                var A = B.currentStyle ? B.currentStyle : window.getComputedStyle(B, null);
                return A[A.getPropertyValue ? "getPropertyValue" : "getAttribute"](z)
            },
            link: function(z, G, A) {
                if (!l.path) {
                    return
                }
                var H = document.getElementsByTagName("head")[0],
                    F = document.createElement("link");
                if (typeof G === "string") {
                    A = G
                }
                var C = (A || z).replace(/\.|\//g, "");
                var B = "layuicss-" + C,
                    E = 0;
                F.rel = "stylesheet";
                F.href = l.path + z;
                F.id = B;
                if (!document.getElementById(B)) {
                    H.appendChild(F)
                }
                if (typeof G !== "function") {
                    return
                }(function D() {
                    if (++E > 8 * 1000 / 100) {
                        return window.console && console.error("laydate.css: Invalid")
                    }
                    parseInt(o.getStyle(document.getElementById(B), "width")) === 1989 ? G() : setTimeout(D, 100)
                }())
            }
        },
        l = {
            v: "5.0.9",
            config: {},
            index: (window.laydate && window.laydate.v) ? 100000 : 0,
            path: o.getPath,
            set: function(z) {
                var A = this;
                A.config = e.extend({}, A.config, z);
                return A
            },
            ready: function(B) {
                var A = "laydate",
                    z = "",
                    C = (t ? "modules/laydate/" : "theme/") + "default/laydate.css?v=" + l.v + z;
                t ? layui.addcss(C, B, A) : o.link(C, B, A);
                return this
            }
        },
        s = function() {
            var z = this;
            return {
                hint: function(A) {
                    z.hint.call(z, A)
                },
                config: z.config
            }
        },
        k = "laydate",
        d = ".layui-laydate",
        j = "layui-this",
        g = "layui-show",
        v = "layui-hide",
        w = "laydate-disabled",
        c = "开始日期超出了结束日期<br>建议重新选择",
        q = [100, 200000],
        r = "layui-laydate-static",
        h = "layui-laydate-list",
        n = "laydate-selected",
        y = "layui-laydate-hint",
        a = "laydate-day-prev",
        b = "laydate-day-next",
        x = "layui-laydate-footer",
        p = ".laydate-btns-confirm",
        f = "laydate-time-text",
        m = ".laydate-btns-time",
        u = function(z) {
            var A = this;
            A.index = ++l.index;
            A.config = e.extend({}, A.config, l.config, z);
            l.ready(function() {
                A.init()
            })
        },
        e = function(z) {
            return new i(z)
        },
        i = function(z) {
            var A = 0,
                B = typeof z === "object" ? [z] : (this.selector = z, document.querySelectorAll(z || null));
            for (; A < B.length; A++) {
                this.push(B[A])
            }
        };
    i.prototype = [];
    i.prototype.constructor = i;
    e.extend = function() {
        var z = 1,
            A = arguments,
            B = function(E, D) {
                E = E || (D.constructor === Array ? [] : {});
                for (var C in D) {
                    E[C] = (D[C] && (D[C].constructor === Object)) ? B(E[C], D[C]) : D[C]
                }
                return E
            };
        A[0] = typeof A[0] === "object" ? A[0] : {};
        for (; z < A.length; z++) {
            if (typeof A[z] === "object") {
                B(A[0], A[z])
            }
        }
        return A[0]
    };
    e.ie = function() {
        var z = navigator.userAgent.toLowerCase();
        return (!!window.ActiveXObject || "ActiveXObject" in window) ? ((z.match(/msie\s(\d+)/) || [])[1] || "11") : false
    }();
    e.stope = function(z) {
        z = z || window.event;
        z.stopPropagation ? z.stopPropagation() : z.cancelBubble = true
    };
    e.each = function(C, A) {
        var z, B = this;
        if (typeof A !== "function") {
            return B
        }
        C = C || [];
        if (C.constructor === Object) {
            for (z in C) {
                if (A.call(C[z], z, C[z])) {
                    break
                }
            }
        } else {
            for (z = 0; z < C.length; z++) {
                if (A.call(C[z], z, C[z])) {
                    break
                }
            }
        }
        return B
    };
    e.digit = function(A, C, z) {
        var D = "";
        A = String(A);
        C = C || 2;
        for (var B = A.length; B < C; B++) {
            D += "0"
        }
        return A < Math.pow(10, C) ? D + (A | 0) : A
    };
    e.elem = function(B, z) {
        var A = document.createElement(B);
        e.each(z || {}, function(C, D) {
            A.setAttribute(C, D)
        });
        return A
    };
    i.addStr = function(A, z) {
        A = A.replace(/\s+/, " ");
        z = z.replace(/\s+/, " ").split(" ");
        e.each(z, function(B, C) {
            if (!new RegExp("\\b" + C + "\\b").test(A)) {
                A = A + " " + C
            }
        });
        return A.replace(/^\s|\s$/, "")
    };
    i.removeStr = function(A, z) {
        A = A.replace(/\s+/, " ");
        z = z.replace(/\s+/, " ").split(" ");
        e.each(z, function(B, C) {
            var D = new RegExp("\\b" + C + "\\b");
            if (D.test(A)) {
                A = A.replace(D, "")
            }
        });
        return A.replace(/\s+/, " ").replace(/^\s|\s$/, "")
    };
    i.prototype.find = function(B) {
        var D = this;
        var C = 0,
            A = [],
            z = typeof B === "object";
        this.each(function(E, F) {
            var G = z ? [B] : F.querySelectorAll(B || null);
            for (; C < G.length; C++) {
                A.push(G[C])
            }
            D.shift()
        });
        if (!z) {
            D.selector = (D.selector ? D.selector + " " : "") + B
        }
        e.each(A, function(E, F) {
            D.push(F)
        });
        return D
    };
    i.prototype.each = function(z) {
        return e.each.call(this, this, z)
    };
    i.prototype.addClass = function(A, z) {
        return this.each(function(B, C) {
            C.className = i[z ? "removeStr" : "addStr"](C.className, A)
        })
    };
    i.prototype.removeClass = function(z) {
        return this.addClass(z, true)
    };
    i.prototype.hasClass = function(A) {
        var z = false;
        this.each(function(B, C) {
            if (new RegExp("\\b" + A + "\\b").test(C.className)) {
                z = true
            }
        });
        return z
    };
    i.prototype.attr = function(z, B) {
        var A = this;
        return B === undefined ? function() {
            if (A.length > 0) {
                return A[0].getAttribute(z)
            }
        }() : A.each(function(C, D) {
            D.setAttribute(z, B)
        })
    };
    i.prototype.removeAttr = function(z) {
        return this.each(function(A, B) {
            B.removeAttribute(z)
        })
    };
    i.prototype.html = function(z) {
        return this.each(function(A, B) {
            B.innerHTML = z
        })
    };
    i.prototype.val = function(z) {
        return this.each(function(A, B) {
            B.value = z
        })
    };
    i.prototype.append = function(z) {
        return this.each(function(A, B) {
            typeof z === "object" ? B.appendChild(z) : B.innerHTML = B.innerHTML + z
        })
    };
    i.prototype.remove = function(z) {
        return this.each(function(A, B) {
            z ? B.removeChild(z) : B.parentNode.removeChild(B)
        })
    };
    i.prototype.on = function(z, A) {
        return this.each(function(B, C) {
            C.attachEvent ? C.attachEvent("on" + z, function(D) {
                D.target = D.srcElement;
                A.call(C, D)
            }) : C.addEventListener(z, A, false)
        })
    };
    i.prototype.off = function(z, A) {
        return this.each(function(B, C) {
            C.detachEvent ? C.detachEvent("on" + z, A) : C.removeEventListener(z, A, false)
        })
    };
    u.isLeapYear = function(z) {
        return (z % 4 === 0 && z % 100 !== 0) || z % 400 === 0
    };
    u.prototype.config = {
        type: "date",
        range: false,
        format: "yyyy-MM-dd",
        value: null,
        min: "1900-1-1",
        max: "2099-12-31",
        trigger: "focus",
        show: false,
        showBottom: true,
        btns: ["clear", "now", "confirm"],
        lang: "cn",
        theme: "default",
        position: null,
        calendar: false,
        mark: {},
        zIndex: null,
        done: null,
        change: null
    };
    u.prototype.lang = function() {
        var A = this,
            z = A.config,
            B = {
                cn: {
                    weeks: ["日", "一", "二", "三", "四", "五", "六"],
                    time: ["时", "分", "秒"],
                    timeTips: "选择时间",
                    startTime: "开始时间",
                    endTime: "结束时间",
                    dateTips: "返回日期",
                    month: ["一", "二", "三", "四", "五", "六", "七", "八", "九", "十", "十一", "十二"],
                    tools: {
                        confirm: "确定",
                        clear: "清空",
                        now: "现在"
                    }
                },
                en: {
                    weeks: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"],
                    time: ["Hours", "Minutes", "Seconds"],
                    timeTips: "Select Time",
                    startTime: "Start Time",
                    endTime: "End Time",
                    dateTips: "Select Date",
                    month: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
                    tools: {
                        confirm: "Confirm",
                        clear: "Clear",
                        now: "Now"
                    }
                }
            };
        return B[z.lang] || B.cn
    };
    u.prototype.init = function() {
        var C = this,
            A = C.config,
            B = "yyyy|y|MM|M|dd|d|HH|H|mm|m|ss|s",
            z = A.position === "static",
            D = {
                year: "yyyy",
                month: "yyyy-MM",
                date: "yyyy-MM-dd",
                time: "HH:mm:ss",
                datetime: "yyyy-MM-dd HH:mm:ss"
            };
        A.elem = e(A.elem);
        A.eventElem = e(A.eventElem);
        if (!A.elem[0]) {
            return
        }
        if (A.range === true) {
            A.range = "-"
        }
        if (A.format === D.date) {
            A.format = D[A.type]
        }
        C.format = A.format.match(new RegExp(B + "|.", "g")) || [];
        C.EXP_IF = "";
        C.EXP_SPLIT = "";
        e.each(C.format, function(E, G) {
            var F = new RegExp(B).test(G) ? "\\d{" + function() {
                if (new RegExp(B).test(C.format[E === 0 ? E + 1 : E - 1] || "")) {
                    if (/^yyyy|y$/.test(G)) {
                        return 4
                    }
                    return G.length
                }
                if (/^yyyy$/.test(G)) {
                    return "1,4"
                }
                if (/^y$/.test(G)) {
                    return "1,308"
                }
                return "1,2"
            }() + "}" : "\\" + G;
            C.EXP_IF = C.EXP_IF + F;
            C.EXP_SPLIT = C.EXP_SPLIT + "(" + F + ")"
        });
        C.EXP_IF = new RegExp("^" + (A.range ? C.EXP_IF + "\\s\\" + A.range + "\\s" + C.EXP_IF : C.EXP_IF) + "$");
        C.EXP_SPLIT = new RegExp("^" + C.EXP_SPLIT + "$", "");
        if (!C.isInput(A.elem[0])) {
            if (A.trigger === "focus") {
                A.trigger = "click"
            }
        }
        if (!A.elem.attr("lay-key")) {
            A.elem.attr("lay-key", C.index);
            A.eventElem.attr("lay-key", C.index)
        }
        A.mark = e.extend({}, (A.calendar && A.lang === "cn") ? {
            "0-1-1": "元旦",
            "0-2-14": "情人",
            "0-3-8": "妇女",
            "0-3-12": "植树",
            "0-4-1": "愚人",
            "0-5-1": "劳动",
            "0-5-4": "青年",
            "0-6-1": "儿童",
            "0-9-10": "教师",
            "0-9-18": "国耻",
            "0-10-1": "国庆",
            "0-12-25": "圣诞"
        } : {}, A.mark);
        e.each(["min", "max"], function(H, J) {
            var K = [],
                I = [];
            if (typeof A[J] === "number") {
                var F = A[J],
                    L = new Date().getTime(),
                    G = 86400000,
                    E = new Date(F ? (F < G ? L + F * G : F) : L);
                K = [E.getFullYear(), E.getMonth() + 1, E.getDate()];
                F < G || (I = [E.getHours(), E.getMinutes(), E.getSeconds()])
            } else {
                K = (A[J].match(/\d+-\d+-\d+/) || [""])[0].split("-");
                I = (A[J].match(/\d+:\d+:\d+/) || [""])[0].split(":")
            }
            A[J] = {
                year: K[0] | 0 || new Date().getFullYear(),
                month: K[1] ? (K[1] | 0) - 1 : new Date().getMonth(),
                date: K[2] | 0 || new Date().getDate(),
                hours: I[0] | 0,
                minutes: I[1] | 0,
                seconds: I[2] | 0
            }
        });
        C.elemID = "layui-laydate" + A.elem.attr("lay-key");
        if (A.show || z) {
            C.render()
        }
        z || C.events();
        if (A.value) {
            if (A.value.constructor === Date) {
                C.setValue(C.parse(0, C.systemDate(A.value)))
            } else {
                C.setValue(A.value)
            }
        }
    };
    u.prototype.render = function() {
        var H = this,
            K = H.config,
            C = H.lang(),
            J = K.position === "static",
            E = H.elem = e.elem("div", {
                id: H.elemID,
                "class": ["layui-laydate", K.range ? " layui-laydate-range" : "", J ? (" " + r) : "", K.theme && K.theme !== "default" && !/^#/.test(K.theme) ? (" laydate-theme-" + K.theme) : ""].join("")
            }),
            G = H.elemMain = [],
            I = H.elemHeader = [],
            D = H.elemCont = [],
            B = H.table = [],
            F = H.footer = e.elem("div", {
                "class": x
            });
        if (K.zIndex) {
            E.style.zIndex = K.zIndex
        }
        e.each(new Array(2), function(N) {
            if (!K.range && N > 0) {
                return true
            }
            var M = e.elem("div", {
                    "class": "layui-laydate-header"
                }),
                R = [function() {
                    var S = e.elem("i", {
                        "class": "layui-icon laydate-icon laydate-prev-y"
                    });
                    S.innerHTML = "&#xe65a;";
                    return S
                }(), function() {
                    var S = e.elem("i", {
                        "class": "layui-icon laydate-icon laydate-prev-m"
                    });
                    S.innerHTML = "&#xe603;";
                    return S
                }(), function() {
                    var S = e.elem("div", {
                            "class": "laydate-set-ym"
                        }),
                        T = e.elem("span"),
                        U = e.elem("span");
                    S.appendChild(T);
                    S.appendChild(U);
                    return S
                }(), function() {
                    var S = e.elem("i", {
                        "class": "layui-icon laydate-icon laydate-next-m"
                    });
                    S.innerHTML = "&#xe602;";
                    return S
                }(), function() {
                    var S = e.elem("i", {
                        "class": "layui-icon laydate-icon laydate-next-y"
                    });
                    S.innerHTML = "&#xe65b;";
                    return S
                }()],
                L = e.elem("div", {
                    "class": "layui-laydate-content"
                }),
                O = e.elem("table"),
                Q = e.elem("thead"),
                P = e.elem("tr");
            e.each(R, function(S, T) {
                M.appendChild(T)
            });
            Q.appendChild(P);
            e.each(new Array(6), function(S) {
                var T = O.insertRow(0);
                e.each(new Array(7), function(U) {
                    if (S === 0) {
                        var V = e.elem("th");
                        V.innerHTML = C.weeks[U];
                        P.appendChild(V)
                    }
                    T.insertCell(U)
                })
            });
            O.insertBefore(Q, O.children[0]);
            L.appendChild(O);
            G[N] = e.elem("div", {
                "class": "layui-laydate-main laydate-main-list-" + N
            });
            G[N].appendChild(M);
            G[N].appendChild(L);
            I.push(R);
            D.push(L);
            B.push(O)
        });
        e(F).html(function() {
            var L = [],
                M = [];
            if (K.type === "datetime") {
                L.push('<span lay-type="datetime" class="laydate-btns-time">' + C.timeTips + "</span>")
            }
            if (K.lang === "en") {
                L.push('<div class="laydate-footer-tips"><span style="color: #343579;">福</span>: TOEFL iBT<sup>&reg;</sup> Test Day</div>')
            } else {
                L.push('<div class="laydate-footer-tips"><span style="color: #343579;">福</span>: 托福网考<sup>&reg;</sup>考试日</div>')
            }
            e.each(K.btns, function(N, O) {
                var P = C.tools[O] || "btn";
                if (K.range && O === "now") {
                    return
                }
                if (J && O === "clear") {
                    P = K.lang === "cn" ? "重置" : "Reset"
                }
                M.push('<span lay-type="' + O + '" class="laydate-btns-' + O + '">' + P + "</span>")
            });
            L.push('<div class="laydate-footer-btns">' + M.join("") + "</div>");
            return L.join("")
        }());
        e.each(G, function(M, L) {
            E.appendChild(L)
        });
        K.showBottom && E.appendChild(F);
        if (/^#/.test(K.theme)) {
            var A = e.elem("style"),
                z = ["#{{id}} .layui-laydate-header{background-color:{{theme}};}", "#{{id}} .layui-this{background-color:{{theme}} !important;}"].join("").replace(/{{id}}/g, H.elemID).replace(/{{theme}}/g, K.theme);
            if ("styleSheet" in A) {
                A.setAttribute("type", "text/css");
                A.styleSheet.cssText = z
            } else {
                A.innerHTML = z
            }
            e(E).addClass("laydate-theme-molv");
            E.appendChild(A)
        }
        H.remove(u.thisElemDate);
        J ? K.elem.append(E) : (document.body.appendChild(E), H.position());
        H.checkDate().calendar();
        H.changeEvent();
        u.thisElemDate = H.elemID;
        typeof K.ready === "function" && K.ready(e.extend({}, K.dateTime, {
            month: K.dateTime.month + 1
        }))
    };
    u.prototype.remove = function(C) {
        var B = this,
            z = B.config,
            A = e("#" + (C || B.elemID));
        if (!A.hasClass(r)) {
            B.checkDate(function() {
                A.remove()
            })
        }
        return B
    };
    u.prototype.position = function() {
        var F = this,
            J = F.config,
            C = F.bindElem || J.elem[0],
            I = C.getBoundingClientRect(),
            E = F.elem.offsetWidth,
            A = F.elem.offsetHeight,
            z = function(K) {
                K = K ? "scrollLeft" : "scrollTop";
                return document.body[K] | document.documentElement[K]
            },
            G = function(K) {
                return document.documentElement[K ? "clientWidth" : "clientHeight"]
            },
            D = 5,
            B = I.left,
            H = I.bottom;
        if (B + E + D > G("width")) {
            B = G("width") - E - D
        }
        if (H + A + D > G()) {
            H = I.top > A ? I.top - A : G() - A;
            H = H - D * 2
        }
        if (J.position) {
            F.elem.style.position = J.position
        }
        F.elem.style.left = B + (J.position === "fixed" ? 0 : z(1)) + "px";
        F.elem.style.top = H + (J.position === "fixed" ? 0 : z()) + "px"
    };
    u.prototype.hint = function(B) {
        var A = this,
            z = A.config,
            C = e.elem("div", {
                "class": y
            });
        C.innerHTML = B || "";
        e(A.elem).find("." + y).remove();
        A.elem.appendChild(C);
        clearTimeout(A.hinTimer);
        A.hinTimer = setTimeout(function() {
            e(A.elem).find("." + y).remove()
        }, 3000)
    };
    u.prototype.getAsYM = function(A, B, z) {
        z ? B-- : B++;
        if (B < 0) {
            B = 11;
            A--
        }
        if (B > 11) {
            B = 0;
            A++
        }
        return [A, B]
    };
    u.prototype.systemDate = function(A) {
        var z = A || new Date();
        return {
            year: z.getFullYear(),
            month: z.getMonth(),
            date: z.getDate(),
            hours: A ? A.getHours() : 0,
            minutes: A ? A.getMinutes() : 0,
            seconds: A ? A.getSeconds() : 0
        }
    };
    u.prototype.checkDate = function(F) {
        var C = this,
            A = new Date(),
            K = C.config,
            J = K.dateTime = K.dateTime || C.systemDate(),
            I, E, z = C.bindElem || K.elem[0],
            B = C.isInput(z) ? "val" : "html",
            H = C.isInput(z) ? z.value : (K.position === "static" ? "" : z.innerHTML),
            G = function(L) {
                if (L.year > q[1]) {
                    L.year = q[1], E = true
                }
                if (L.month > 11) {
                    L.month = 11, E = true
                }
                if (L.hours > 23) {
                    L.hours = 0, E = true
                }
                if (L.minutes > 59) {
                    L.minutes = 0, L.hours++, E = true
                }
                if (L.seconds > 59) {
                    L.seconds = 0, L.minutes++, E = true
                }
                I = l.getEndDate(L.month + 1, L.year);
                if (L.date > I) {
                    L.date = I, E = true
                }
            },
            D = function(O, N, L) {
                var M = ["startTime", "endTime"];
                N = (N.match(C.EXP_SPLIT) || []).slice(1);
                L = L || 0;
                if (K.range) {
                    C[M[L]] = C[M[L]] || {}
                }
                e.each(C.format, function(P, Q) {
                    var R = parseFloat(N[P]);
                    if (N[P].length < Q.length) {
                        E = true
                    }
                    if (/yyyy|y/.test(Q)) {
                        if (R < q[0]) {
                            R = q[0], E = true
                        }
                        O.year = R
                    } else {
                        if (/MM|M/.test(Q)) {
                            if (R < 1) {
                                R = 1, E = true
                            }
                            O.month = R - 1
                        } else {
                            if (/dd|d/.test(Q)) {
                                if (R < 1) {
                                    R = 1, E = true
                                }
                                O.date = R
                            } else {
                                if (/HH|H/.test(Q)) {
                                    if (R < 1) {
                                        R = 0, E = true
                                    }
                                    O.hours = R;
                                    K.range && (C[M[L]].hours = R)
                                } else {
                                    if (/mm|m/.test(Q)) {
                                        if (R < 1) {
                                            R = 0, E = true
                                        }
                                        O.minutes = R;
                                        K.range && (C[M[L]].minutes = R)
                                    } else {
                                        if (/ss|s/.test(Q)) {
                                            if (R < 1) {
                                                R = 0, E = true
                                            }
                                            O.seconds = R;
                                            K.range && (C[M[L]].seconds = R)
                                        }
                                    }
                                }
                            }
                        }
                    }
                });
                G(O)
            };
        if (F === "limit") {
            return G(J), C
        }
        H = H || K.value;
        if (typeof H === "string") {
            H = H.replace(/\s+/g, " ").replace(/^\s|\s$/g, "")
        }
        if (C.startState && !C.endState) {
            delete C.startState;
            C.endState = true
        }
        if (typeof H === "string" && H) {
            if (C.EXP_IF.test(H)) {
                if (K.range) {
                    H = H.split(" " + K.range + " ");
                    C.startDate = C.startDate || C.systemDate();
                    C.endDate = C.endDate || C.systemDate();
                    K.dateTime = e.extend({}, C.startDate);
                    e.each([C.startDate, C.endDate], function(L, M) {
                        D(M, H[L], L)
                    })
                } else {
                    D(J, H)
                }
            } else {
                C.hint("日期格式不合法<br>必须遵循下述格式：<br>" + (K.range ? (K.format + " " + K.range + " " + K.format) : K.format) + "<br>已为你重置");
                E = true
            }
        } else {
            if (H && H.constructor === Date) {
                K.dateTime = C.systemDate(H)
            } else {
                K.dateTime = C.systemDate();
                delete C.startState;
                delete C.endState;
                delete C.startDate;
                delete C.endDate;
                delete C.startTime;
                delete C.endTime
            }
        }
        G(J);
        if (E && H) {
            C.setValue(K.range ? (C.endDate ? C.parse() : "") : C.parse())
        }
        F && F();
        return C
    };
    u.prototype.mark = function(D, A) {
        var B = this,
            C, z = B.config;
        e.each(z.mark, function(E, G) {
            var F = E.split("-");
            if ((F[0] == A[0] || F[0] == 0) && (F[1] == A[1] || F[1] == 0) && F[2] == A[2]) {
                C = G || A[2]
            }
        });
        C && D.html('<span class="laydate-day-mark">' + C + "</span>");
        return B
    };
    u.prototype.limit = function(B, C, G, A) {
        var F = this,
            I = F.config,
            E = {},
            H = I[G > 41 ? "endDate" : "dateTime"],
            D, z = e.extend({}, H, C || {});
        e.each({
            now: z,
            min: I.min,
            max: I.max
        }, function(J, K) {
            E[J] = F.newDate(e.extend({
                year: K.year,
                month: K.month,
                date: K.date
            }, function() {
                var L = {};
                e.each(A, function(M, N) {
                    L[N] = K[N]
                });
                return L
            }())).getTime()
        });
        D = E.now < E.min || E.now > E.max;
        B && B[D ? "addClass" : "removeClass"](w);
        return D
    };
    u.prototype.calendar = function(K) {
        var E = this,
            M = E.config,
            L = K || M.dateTime,
            B = new Date(),
            z, G, J, A = E.lang(),
            I = M.type !== "date" && M.type !== "datetime",
            D = K ? 1 : 0,
            C = e(E.table[D]).find("td"),
            F = e(E.elemHeader[D][2]).find("span");
        if (L.year < q[0]) {
            L.year = q[0], E.hint("最低只能支持到公元" + q[0] + "年")
        }
        if (L.year > q[1]) {
            L.year = q[1], E.hint("最高只能支持到公元" + q[1] + "年")
        }
        if (!E.firstDate) {
            E.firstDate = e.extend({}, L)
        }
        B.setFullYear(L.year, L.month, 1);
        z = B.getDay();
        G = l.getEndDate(L.month || 12, L.year);
        J = l.getEndDate(L.month + 1, L.year);
        e.each(C, function(O, Q) {
            var P = [L.year, L.month],
                N = 0;
            Q = e(Q);
            Q.removeAttr("class");
            if (O < z) {
                N = G - z + O;
                Q.addClass("laydate-day-prev");
                P = E.getAsYM(L.year, L.month, "sub")
            } else {
                if (O >= z && O < J + z) {
                    N = O - z;
                    if (!M.range) {
                        N + 1 === L.date && Q.addClass(j)
                    }
                } else {
                    N = O - J - z;
                    Q.addClass("laydate-day-next");
                    P = E.getAsYM(L.year, L.month)
                }
            }
            P[1]++;
            P[2] = N + 1;
            Q.attr("lay-ymd", P.join("-")).html(P[2]);
            E.mark(Q, P).limit(Q, {
                year: P[0],
                month: P[1] - 1,
                date: P[2]
            }, O)
        });
        e(F[0]).attr("lay-ym", L.year + "-" + (L.month + 1));
        e(F[1]).attr("lay-ym", L.year + "-" + (L.month + 1));
        if (M.lang === "cn") {
            e(F[0]).attr("lay-type", "year").html(L.year + "年");
            e(F[1]).attr("lay-type", "month").html((L.month + 1) + "月")
        } else {
            e(F[0]).attr("lay-type", "month").html(A.month[L.month]);
            e(F[1]).attr("lay-type", "year").html(L.year)
        }
        if (I) {
            if (M.range) {
                K ? E.endDate = (E.endDate || {
                    year: L.year + (M.type === "year" ? 1 : 0),
                    month: L.month + (M.type === "month" ? 0 : -1)
                }) : (E.startDate = E.startDate || {
                    year: L.year,
                    month: L.month
                });
                if (K) {
                    E.listYM = [
                        [E.startDate.year, E.startDate.month + 1],
                        [E.endDate.year, E.endDate.month + 1]
                    ];
                    E.list(M.type, 0).list(M.type, 1);
                    M.type === "time" ? E.setBtnStatus("时间", e.extend({}, E.systemDate(), E.startTime), e.extend({}, E.systemDate(), E.endTime)) : E.setBtnStatus(true)
                }
            }
            if (!M.range) {
                E.listYM = [
                    [L.year, L.month + 1]
                ];
                E.list(M.type, 0)
            }
        }
        if (M.range && !K) {
            var H = E.getAsYM(L.year, L.month);
            E.calendar(e.extend({}, L, {
                year: H[0],
                month: H[1]
            }))
        }
        if (!M.range) {
            E.limit(e(E.footer).find(p), null, 0, ["hours", "minutes", "seconds"])
        }
        if (M.range && K && !I) {
            E.stampRange()
        }
        return E
    };
    u.prototype.list = function(D, G) {
        var H = this,
            C = H.config,
            F = C.dateTime,
            V = H.lang(),
            N = C.range && C.type !== "date" && C.type !== "datetime",
            L = e.elem("ul", {
                "class": h + " " + ({
                    year: "laydate-year-list",
                    month: "laydate-month-list",
                    time: "laydate-time-list"
                })[D]
            }),
            P = H.elemHeader[G],
            U = e(P[2]).find("span"),
            R = H.elemCont[G || 0],
            B = e(R).find("." + h)[0],
            J = C.lang === "cn",
            K = J ? "年" : "",
            T = H.listYM[G] || {},
            E = ["hours", "minutes", "seconds"],
            Q = ["startTime", "endTime"][G];
        if (T[0] < 1) {
            T[0] = 1
        }
        if (D === "year") {
            var z, O = z = T[0] - 7;
            if (O < 1) {
                O = z = 1
            }
            e.each(new Array(15), function(X) {
                var W = e.elem("li", {
                        "lay-ym": z
                    }),
                    Y = {
                        year: z
                    };
                z == T[0] && e(W).addClass(j);
                W.innerHTML = z + K;
                L.appendChild(W);
                if (z < H.firstDate.year) {
                    Y.month = C.min.month;
                    Y.date = C.min.date
                } else {
                    if (z >= H.firstDate.year) {
                        Y.month = C.max.month;
                        Y.date = C.max.date
                    }
                }
                H.limit(e(W), Y, G);
                z++
            });
            e(U[J ? 0 : 1]).attr("lay-ym", (z - 8) + "-" + T[1]).html((O + K) + " - " + (z - 1 + K))
        } else {
            if (D === "month") {
                e.each(new Array(12), function(X) {
                    var W = e.elem("li", {
                            "lay-ym": X
                        }),
                        Y = {
                            year: T[0],
                            month: X
                        };
                    X + 1 == T[1] && e(W).addClass(j);
                    W.innerHTML = V.month[X] + (J ? "月" : "");
                    L.appendChild(W);
                    if (T[0] < H.firstDate.year) {
                        Y.date = C.min.date
                    } else {
                        if (T[0] >= H.firstDate.year) {
                            Y.date = C.max.date
                        }
                    }
                    H.limit(e(W), Y, G)
                });
                e(U[J ? 0 : 1]).attr("lay-ym", T[0] + "-" + T[1]).html(T[0] + K)
            } else {
                if (D === "time") {
                    var I = function() {
                        e(L).find("ol").each(function(X, W) {
                            e(W).find("li").each(function(Z, Y) {
                                H.limit(e(Y), [{
                                    hours: Z
                                }, {
                                    hours: H[Q].hours,
                                    minutes: Z
                                }, {
                                    hours: H[Q].hours,
                                    minutes: H[Q].minutes,
                                    seconds: Z
                                }][X], G, [
                                    ["hours"],
                                    ["hours", "minutes"],
                                    ["hours", "minutes", "seconds"]
                                ][X])
                            })
                        });
                        if (!C.range) {
                            H.limit(e(H.footer).find(p), H[Q], 0, ["hours", "minutes", "seconds"])
                        }
                    };
                    if (C.range) {
                        if (!H[Q]) {
                            H[Q] = {
                                hours: 0,
                                minutes: 0,
                                seconds: 0
                            }
                        }
                    } else {
                        H[Q] = F
                    }
                    e.each([24, 60, 60], function(Y, Z) {
                        var W = e.elem("li"),
                            X = ["<p>" + V.time[Y] + "</p><ol>"];
                        e.each(new Array(Z), function(aa) {
                            X.push("<li" + (H[Q][E[Y]] === aa ? ' class="' + j + '"' : "") + ">" + e.digit(aa, 2) + "</li>")
                        });
                        W.innerHTML = X.join("") + "</ol>";
                        L.appendChild(W)
                    });
                    I()
                }
            }
        }
        if (B) {
            R.removeChild(B)
        }
        R.appendChild(L);
        if (D === "year" || D === "month") {
            e(H.elemMain[G]).addClass("laydate-ym-show");
            e(L).find("li").on("click", function() {
                var W = e(this).attr("lay-ym") | 0;
                if (e(this).hasClass(w)) {
                    return
                }
                if (G === 0) {
                    F[D] = W;
                    if (N) {
                        H.startDate[D] = W
                    }
                    H.limit(e(H.footer).find(p), null, 0)
                } else {
                    if (N) {
                        H.endDate[D] = W
                    } else {
                        var X = D === "year" ? H.getAsYM(W, T[1] - 1, "sub") : H.getAsYM(T[0], W, "sub");
                        e.extend(F, {
                            year: X[0],
                            month: X[1]
                        })
                    }
                }
                if (C.type === "year" || C.type === "month") {
                    e(L).find("." + j).removeClass(j);
                    e(this).addClass(j);
                    if (C.type === "month" && D === "year") {
                        H.listYM[G][0] = W;
                        N && (H[["startDate", "endDate"][G]].year = W);
                        H.list("month", G)
                    }
                } else {
                    H.checkDate("limit").calendar();
                    H.closeList()
                }
                H.setBtnStatus();
                C.range || H.done(null, "change");
                e(H.footer).find(m).removeClass(w)
            })
        } else {
            var M = e.elem("span", {
                    "class": f
                }),
                A = function() {
                    e(L).find("ol").each(function(Y) {
                        var X = this,
                            W = e(X).find("li");
                        X.scrollTop = 30 * (H[Q][E[Y]] - 2);
                        if (X.scrollTop <= 0) {
                            W.each(function(Z, aa) {
                                if (!e(this).hasClass(w)) {
                                    X.scrollTop = 30 * (Z - 2);
                                    return true
                                }
                            })
                        }
                    })
                },
                S = e(P[2]).find("." + f);
            A();
            M.innerHTML = C.range ? [V.startTime, V.endTime][G] : V.timeTips;
            e(H.elemMain[G]).addClass("laydate-time-show");
            if (S[0]) {
                S.remove()
            }
            P[2].appendChild(M);
            e(L).find("ol").each(function(X) {
                var W = this;
                e(W).find("li").on("click", function() {
                    var Y = this.innerHTML | 0;
                    if (e(this).hasClass(w)) {
                        return
                    }
                    if (C.range) {
                        H[Q][E[X]] = Y
                    } else {
                        F[E[X]] = Y
                    }
                    e(W).find("." + j).removeClass(j);
                    e(this).addClass(j);
                    I();
                    A();
                    (H.endDate || C.type === "time") && H.done(null, "change");
                    H.setBtnStatus()
                })
            })
        }
        return H
    };
    u.prototype.listYM = [];
    u.prototype.closeList = function() {
        var A = this,
            z = A.config;
        e.each(A.elemCont, function(B, C) {
            e(this).find("." + h).remove();
            e(A.elemMain[B]).removeClass("laydate-ym-show laydate-time-show")
        });
        e(A.elem).find("." + f).remove()
    };
    u.prototype.setBtnStatus = function(A, G, B) {
        var D = this,
            C = D.config,
            F, E = e(D.footer).find(p),
            z = C.range && C.type !== "date" && C.type !== "time";
        if (z) {
            G = G || D.startDate;
            B = B || D.endDate;
            F = D.newDate(G).getTime() > D.newDate(B).getTime();
            (D.limit(null, G) || D.limit(null, B)) ? E.addClass(w): E[F ? "addClass" : "removeClass"](w);
            if (A && F) {
                D.hint(typeof A === "string" ? c.replace(/日期/g, A) : c)
            }
        }
    };
    u.prototype.parse = function(D, A) {
        var B = this,
            z = B.config,
            C = A || (D ? e.extend({}, B.endDate, B.endTime) : (z.range ? e.extend({}, B.startDate, B.startTime) : z.dateTime)),
            E = B.format.concat();
        e.each(E, function(F, G) {
            if (/yyyy|y/.test(G)) {
                E[F] = e.digit(C.year, G.length)
            } else {
                if (/MM|M/.test(G)) {
                    E[F] = e.digit(C.month + 1, G.length)
                } else {
                    if (/dd|d/.test(G)) {
                        E[F] = e.digit(C.date, G.length)
                    } else {
                        if (/HH|H/.test(G)) {
                            E[F] = e.digit(C.hours, G.length)
                        } else {
                            if (/mm|m/.test(G)) {
                                E[F] = e.digit(C.minutes, G.length)
                            } else {
                                if (/ss|s/.test(G)) {
                                    E[F] = e.digit(C.seconds, G.length)
                                }
                            }
                        }
                    }
                }
            }
        });
        if (z.range && !D) {
            return E.join("") + " " + z.range + " " + B.parse(1)
        }
        return E.join("")
    };
    u.prototype.newDate = function(z) {
        z = z || {};
        return new Date(z.year || 1, z.month || 0, z.date || 1, z.hours || 0, z.minutes || 0, z.seconds || 0)
    };
    u.prototype.setValue = function(C) {
        var B = this,
            z = B.config,
            A = B.bindElem || z.elem[0],
            D = B.isInput(A) ? "val" : "html";
        z.position === "static" || e(A)[D](C || "");
        return this
    };
    u.prototype.stampRange = function() {
        var D = this,
            A = D.config,
            C, z, B = e(D.elem).find("td");
        if (A.range && !D.endDate) {
            e(D.footer).find(p).addClass(w)
        }
        if (!D.endDate) {
            return
        }
        C = D.newDate({
            year: D.startDate.year,
            month: D.startDate.month,
            date: D.startDate.date
        }).getTime();
        z = D.newDate({
            year: D.endDate.year,
            month: D.endDate.month,
            date: D.endDate.date
        }).getTime();
        if (C > z) {
            return D.hint(c)
        }
        e.each(B, function(E, G) {
            var H = e(G).attr("lay-ymd").split("-"),
                F = D.newDate({
                    year: H[0],
                    month: H[1] - 1,
                    date: H[2]
                }).getTime();
            e(G).removeClass(n + " " + j);
            if (F === C || F === z) {
                e(G).addClass(e(G).hasClass(a) || e(G).hasClass(b) ? n : j)
            }
            if (F > C && F < z) {
                e(G).addClass(n)
            }
        })
    };
    u.prototype.done = function(D, B) {
        var C = this,
            A = C.config,
            E = e.extend({}, C.startDate ? e.extend(C.startDate, C.startTime) : A.dateTime),
            z = e.extend({}, e.extend(C.endDate, C.endTime));
        e.each([E, z], function(F, G) {
            if (!("month" in G)) {
                return
            }
            e.extend(G, {
                month: G.month + 1
            })
        });
        D = D || [C.parse(), E, z];
        typeof A[B || "done"] === "function" && A[B || "done"].apply(A, D);
        return C
    };
    u.prototype.choose = function(G) {
        var D = this,
            A = D.config,
            E = A.dateTime,
            C = e(D.elem).find("td"),
            B = G.attr("lay-ymd").split("-"),
            F = function(I) {
                var H = new Date();
                I && e.extend(E, B);
                if (A.range) {
                    D.startDate ? e.extend(D.startDate, B) : (D.startDate = e.extend({}, B, D.startTime));
                    D.startYMD = B
                }
            };
        B = {
            year: B[0] | 0,
            month: (B[1] | 0) - 1,
            date: B[2] | 0
        };
        if (G.hasClass(w)) {
            return
        }
        if (A.range) {
            e.each(["startTime", "endTime"], function(H, I) {
                D[I] = D[I] || {
                    hours: 0,
                    minutes: 0,
                    seconds: 0
                }
            });
            if (D.endState) {
                F();
                delete D.endState;
                delete D.endDate;
                D.startState = true;
                C.removeClass(j + " " + n);
                G.addClass(j)
            } else {
                if (D.startState) {
                    G.addClass(j);
                    D.endDate ? e.extend(D.endDate, B) : (D.endDate = e.extend({}, B, D.endTime));
                    if (D.newDate(B).getTime() < D.newDate(D.startYMD).getTime()) {
                        var z = e.extend({}, D.endDate, {
                            hours: D.startDate.hours,
                            minutes: D.startDate.minutes,
                            seconds: D.startDate.seconds
                        });
                        e.extend(D.endDate, D.startDate, {
                            hours: D.endDate.hours,
                            minutes: D.endDate.minutes,
                            seconds: D.endDate.seconds
                        });
                        D.startDate = z
                    }
                    A.showBottom || D.done();
                    D.stampRange();
                    D.endState = true;
                    D.done(null, "change")
                } else {
                    G.addClass(j);
                    F();
                    D.startState = true
                }
            }
            e(D.footer).find(p)[D.endDate ? "removeClass" : "addClass"](w)
        } else {
            if (A.position === "static") {
                F(true);
                D.calendar().done().done(null, "change")
            } else {
                if (A.type === "date") {
                    F(true);
                    D.setValue(D.parse()).remove().done()
                } else {
                    if (A.type === "datetime") {
                        F(true);
                        D.calendar().done(null, "change")
                    }
                }
            }
        }
    };
    u.prototype.tool = function(B, C) {
        var D = this,
            A = D.config,
            E = A.dateTime,
            z = A.position === "static",
            F = {
                datetime: function() {
                    if (e(B).hasClass(w)) {
                        return
                    }
                    D.list("time", 0);
                    A.range && D.list("time", 1);
                    e(B).attr("lay-type", "date").html(D.lang().dateTips)
                },
                date: function() {
                    D.closeList();
                    e(B).attr("lay-type", "datetime").html(D.lang().timeTips)
                },
                clear: function() {
                    D.setValue("").remove();
                    z && (e.extend(E, D.firstDate), D.calendar());
                    A.range && (delete D.startState, delete D.endState, delete D.endDate, delete D.startTime, delete D.endTime);
                    D.done(["", {}, {}])
                },
                now: function() {
                    var G = new Date();
                    e.extend(E, D.systemDate(), {
                        hours: G.getHours(),
                        minutes: G.getMinutes(),
                        seconds: G.getSeconds()
                    });
                    D.setValue(D.parse()).remove();
                    z && D.calendar();
                    D.done()
                },
                confirm: function() {
                    if (A.range) {
                        if (!D.endDate) {
                            return D.hint("请先选择日期范围")
                        }
                        if (e(B).hasClass(w)) {
                            return D.hint(A.type === "time" ? c.replace(/日期/g, "时间") : c)
                        }
                    } else {
                        if (e(B).hasClass(w)) {
                            return D.hint("不在有效日期或时间范围内")
                        }
                    }
                    D.done();
                    D.setValue(D.parse()).remove()
                }
            };
        F[C] && F[C]()
    };
    u.prototype.change = function(C) {
        var F = this,
            B = F.config,
            G = B.dateTime,
            z = B.range && (B.type === "year" || B.type === "month"),
            D = F.elemCont[C || 0],
            A = F.listYM[C],
            E = function(I) {
                var H = ["startDate", "endDate"][C],
                    J = e(D).find(".laydate-year-list")[0],
                    K = e(D).find(".laydate-month-list")[0];
                if (J) {
                    A[0] = I ? A[0] - 15 : A[0] + 15;
                    F.list("year", C)
                }
                if (K) {
                    I ? A[0]-- : A[0]++;
                    F.list("month", C)
                }
                if (J || K) {
                    e.extend(G, {
                        year: A[0]
                    });
                    if (z) {
                        F[H].year = A[0]
                    }
                    B.range || F.done(null, "change");
                    F.setBtnStatus();
                    B.range || F.limit(e(F.footer).find(p), {
                        year: A[0]
                    })
                }
                return J || K
            };
        return {
            prevYear: function() {
                if (E("sub")) {
                    return
                }
                G.year--;
                F.checkDate("limit").calendar();
                B.range || F.done(null, "change")
            },
            prevMonth: function() {
                var H = F.getAsYM(G.year, G.month, "sub");
                e.extend(G, {
                    year: H[0],
                    month: H[1]
                });
                F.checkDate("limit").calendar();
                B.range || F.done(null, "change")
            },
            nextMonth: function() {
                var H = F.getAsYM(G.year, G.month);
                e.extend(G, {
                    year: H[0],
                    month: H[1]
                });
                F.checkDate("limit").calendar();
                B.range || F.done(null, "change")
            },
            nextYear: function() {
                if (E()) {
                    return
                }
                G.year++;
                F.checkDate("limit").calendar();
                B.range || F.done(null, "change")
            }
        }
    };
    u.prototype.changeEvent = function() {
        var A = this,
            z = A.config;
        e(A.elem).on("click", function(B) {
            e.stope(B)
        });
        e.each(A.elemHeader, function(B, C) {
            e(C[0]).on("click", function(D) {
                A.change(B).prevYear()
            });
            e(C[1]).on("click", function(D) {
                A.change(B).prevMonth()
            });
            e(C[2]).find("span").on("click", function(G) {
                var F = e(this),
                    E = F.attr("lay-ym"),
                    D = F.attr("lay-type");
                if (!E) {
                    return
                }
                E = E.split("-");
                A.listYM[B] = [E[0] | 0, E[1] | 0];
                A.list(D, B);
                e(A.footer).find(m).addClass(w)
            });
            e(C[3]).on("click", function(D) {
                A.change(B).nextMonth()
            });
            e(C[4]).on("click", function(D) {
                A.change(B).nextYear()
            })
        });
        e.each(A.table, function(B, D) {
            var C = e(D).find("td");
            C.on("click", function() {
                A.choose(e(this))
            })
        });
        e(A.footer).find("span").on("click", function() {
            var B = e(this).attr("lay-type");
            A.tool(this, B)
        })
    };
    u.prototype.isInput = function(z) {
        return /input|textarea/.test(z.tagName.toLocaleLowerCase())
    };
    u.prototype.events = function() {
        var B = this,
            z = B.config,
            A = function(C, D) {
                C.on(z.trigger, function() {
                    D && (B.bindElem = this);
                    B.render()
                })
            };
        if (!z.elem[0] || z.elem[0].eventHandler) {
            return
        }
        A(z.elem, "bind");
        A(z.eventElem);
        e(document).on("click", function(C) {
            if (C.target === z.elem[0] || C.target === z.eventElem[0] || C.target === e(z.closeStop)[0]) {
                return
            }
            B.remove()
        }).on("keydown", function(C) {
            if (C.keyCode === 13) {
                if (e("#" + B.elemID)[0] && B.elemID === u.thisElem) {
                    C.preventDefault();
                    e(B.footer).find(p)[0].click()
                }
            }
        });
        e(window).on("resize", function() {
            if (!B.elem || !e(d)[0]) {
                return false
            }
            B.position()
        });
        z.elem[0].eventHandler = true
    };
    l.render = function(z) {
        var A = new u(z);
        return s.call(A)
    };
    l.getEndDate = function(B, A) {
        var z = new Date();
        z.setFullYear(A || z.getFullYear(), B || (z.getMonth() + 1), 1);
        return new Date(z.getTime() - 1000 * 60 * 60 * 24).getDate()
    };
    window.lay = window.lay || e;
    t ? (l.ready(), layui.define(function(z) {
        l.path = layui.cache.dir;
        z(k, l)
    })) : ((typeof define === "function" && define.amd) ? define(function() {
        return l
    }) : function() {
        l.ready();
        window.laydate = l
    }())
}();