/*!
Smallipop (01/17/2015)
Copyright (c) 2011-2015 Small Improvements (http://www.small-improvements.com)

Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.

@author Sebastian Helzle (sebastian@helzle.net)
 */
(function(a) {
    if (typeof define === "function" && define.amd) {
        return define(["jquery"], a)
    } else {
        return a(jQuery)
    }
})(function(ar) {
    var w, ac, P, ak, ay, v, a, o, aI, c, av, S, u, m, aH, j, B, V, R, aj, aK, K, aE, aF, aJ, an, b, h, aB, x, ah, f, aq, O, aG, n, d, G, aa, A, ag, af, k, C, aC, ad, N, r, I, H, p, t, L, U, T, ab, Q, W, e, ap, X, Z, M, D, J, aD, ao, s, al, g, au, z, y, i, E, az, aw, ai, am, l, Y, aA, ae, F, q, ax, at;
    v = "smallipop";
    aI = v + "-hint";
    av = v + "-instance";
    o = v + "-content";
    S = v + "-left";
    u = v + "-right";
    a = v + "-bottom";
    ak = v + "-align-left";
    ay = v + "-align-right";
    c = v + "-initialized";
    m = v + "-theme-";
    aH = v + "-tour";
    V = aH + "-content";
    aK = aH + "-overlay";
    R = aH + "-footer";
    B = aH + "-close-icon";
    aE = aH + "-progress";
    j = aH + "-close";
    K = aH + "-prev";
    aj = aH + "-next";
    A = "focus." + v;
    aa = "click." + v;
    G = "blur." + v;
    af = "mouseout." + v;
    k = "mouseover." + v;
    ad = "touchend." + v;
    C = "resize." + v;
    aC = "scroll." + v;
    ag = "keyup." + v;
    n = v + "OriginalZIndex";
    an = v + "BeingShown";
    ah = v + "HideDelayTimer";
    f = v + "ShowDelayTimer";
    aq = v + "TriggerHovered";
    h = v + "PopupHovered";
    x = v + "Shown";
    aB = v + "Position";
    O = v + "XDistance";
    aG = v + "YDistance";
    b = v + "IsTour";
    s = new RegExp(v + "-(align|bottom)w*", "g");
    al = new RegExp(v + "w+", "g");
    w = ar(document);
    P = ar(window);
    ac = null;
    W = {};
    q = {};
    aJ = null;
    X = 1;
    M = 1;
    i = null;
    Z = 0;
    au = null;
    aD = "<div class='" + av + "'><div class='" + o + "'/></div>";
    ar.smallipop = am = {
        version: "0.6.2",
        defaults: {
            autoscrollPadding: 200,
            contentAnimationSpeed: 150,
            cssAnimations: {
                enabled: false,
                show: "animated fadeIn",
                hide: "animated fadeOut"
            },
            funcEase: "easeInOutQuad",
            handleInputs: true,
            hideDelay: 500,
            hideTrigger: false,
            hideOnPopupClick: true,
            hideOnTriggerClick: true,
            infoClass: aI,
            invertAnimation: false,
            popupId: "",
            popupOffset: 31,
            popupYOffset: 0,
            popupDistance: 20,
            popupDelay: 100,
            popupAnimationSpeed: 200,
            preferredPosition: "top",
            referencedContent: null,
            theme: "default",
            touchSupport: true,
            tourHighlight: false,
            tourHighlightColor: "#222",
            tourHighlightFadeDuration: 200,
            tourHighlightOpacity: 0.5,
            tourHighlightZIndex: 9997,
            tourNavigationEnabled: true,
            triggerAnimationSpeed: 150,
            triggerOnClick: false,
            onAfterHide: null,
            onAfterShow: null,
            onBeforeHide: null,
            onBeforeShow: null,
            onTourClose: null,
            onTourNext: null,
            onTourPrev: null,
            windowPadding: 30,
            labels: {
                prev: "Prev",
                next: "Next",
                close: "Close",
                of: "of"
            }
        }
    };
    if (!ar.easing.easeInOutQuad) {
        ar.easing.easeInOutQuad = function(aM, aN, aL, aP, aO) {
            if ((aN /= aO / 2) < 1) {
                return aP / 2 * aN * aN + aL
            } else {
                return -aP / 2 * ((--aN) * (aN - 2) - 1) + aL
            }
        }
    }
    z = function() {
        var aO, aM, aP, aN, aL;
        aL = [];
        for (aP in q) {
            aM = q[aP];
            aL.push((function() {
                var aS, aQ, aR;
                aR = [];
                for (aS = 0, aQ = aM.length; aS < aQ; aS++) {
                    aO = aM[aS];
                    aN = aO.trigger;
                    if (aN.data(n)) {
                        aR.push(aN.css("zIndex", aN.data(n)))
                    } else {
                        aR.push(void 0)
                    }
                }
                return aR
            })())
        }
        return aL
    };
    l = typeof Modernizr !== "undefined" && Modernizr !== null ? Modernizr.touch : void 0;
    aF = typeof Modernizr !== "undefined" && Modernizr !== null ? Modernizr.cssanimations : void 0;
    T = function(aL) {
        return ar("." + (v + aL))
    };
    U = function() {
        if (!ac) {
            ac = ar("<div id='" + aK + "'/>").appendTo(ar("body")).fadeOut(0)
        }
        return ac
    };
    Q = function(aL) {
        U().fadeOut(aL.tourHighlightFadeDuration);
        return z()
    };
    ab = function(aZ) {
        var a1, aP, aY, aL, aQ, aW, aV, a3, aU, aM, aR, aX, aS, a2, a0, aT, aO, aN;
        clearTimeout(i);
        a3 = (aZ != null ? aZ.target : void 0) ? ar(aZ.target) : aZ;
        aN = [];
        for (aW in W) {
            aL = W[aW];
            aQ = aL.data();
            if (!(aV = aQ[x])) {
                continue
            }
            aU = T(aV);
            aR = aU.is(a3);
            aM = aU.data(v);
            aX = aM.options || am.defaults;
            if ((aQ[b] || aM.isFormElement) && !aL.is(a3) && !(aR && aL.is(aX.popupInstance))) {
                continue
            }
            if (aQ[b]) {
                aJ = null;
                if ((aT = aU.data(v)) != null) {
                    if (typeof(a0 = aT.options).onTourClose === "function") {
                        a0.onTourClose()
                    }
                }
                Q(aX)
            }
            aY = !aX.hideOnTriggerClick && aR;
            aP = !aX.hideOnPopupClick && aL.find(a3).length;
            if (a3 && aU.length && ((aO = aZ != null ? aZ.type : void 0) === "click" || aO === "touchend") && (aY || aP)) {
                continue
            }
            if (aV && aX.hideTrigger) {
                aU.stop(true).fadeTo(aX.triggerAnimationSpeed, 1)
            }
            aL.data(ah, null).data(an, false);
            if (aX.cssAnimations.enabled) {
                aL.removeClass(aX.cssAnimations.show).addClass(aX.cssAnimations.hide).data(x, "");
                if (aX.onAfterHide) {
                    aN.push(window.setTimeout(aX.onAfterHide, aX.popupAnimationSpeed))
                } else {
                    aN.push(void 0)
                }
            } else {
                a1 = aX.invertAnimation ? -1 : 1;
                aS = aQ[O] * a1;
                a2 = aQ[aG] * a1;
                aN.push(aL.stop(true).animate({
                    top: "-=" + a2,
                    left: "+=" + aS,
                    opacity: 0
                }, aX.popupAnimationSpeed, aX.funcEase, function() {
                    var a4;
                    a4 = ar(this);
                    if (!a4.data(an)) {
                        a4.css("display", "none").data(x, "")
                    }
                    return typeof aX.onAfterHide === "function" ? aX.onAfterHide() : void 0
                }))
            }
        }
        return aN
    };
    aw = function(aN) {
        var aL, aM;
        aL = ar(this).data(v);
        if (!aL) {
            return
        }
        if (aL.popupInstance.data(x) !== aL.id && ((aM = !aL.type) === "checkbox" || aM === "radio")) {
            if (aN != null) {
                aN.preventDefault()
            }
        }
        return at.call(this)
    };
    ap = function(aL) {
        clearTimeout(aL.data(ah));
        return clearTimeout(aL.data(f))
    };
    ao = function(aL) {
        if (aL == null) {
            aL = 50
        }
        clearTimeout(au);
        return au = setTimeout(g, aL)
    };
    p = function(aM, aL) {
        if (aM) {
            return (aM.match(aL) || []).join(" ")
        }
    };
    I = function(aL, aM) {
        return p(aM, s)
    };
    H = function(aL, aM) {
        return p(aM, al)
    };
    g = function(aT) {
        var bc, be, bn, a4, ba, bb, aU, bf, a0, bm, aZ, a7, aN, a2, aW, aY, aX, bj, aR, a9, aV, bi, aM, a8, aP, bh, bd, bg, aQ, aO, aS, aL, a5, a1, a3, a6, bl, bk;
        if (aT == null) {
            aT = true
        }
        bk = [];
        for (aN in W) {
            ba = W[aN];
            aU = ba.data();
            bi = aU[x];
            if (!bi) {
                continue
            }
            a8 = T(bi);
            aP = a8.data(v);
            a4 = aP.options;
            ba.removeClass(I);
            if (aT) {
                aM = m + a4.theme.split(" ").join(" " + m);
                ba.attr("class", "" + av + " " + aM)
            }
            bh = ar(window);
            aL = a3 = a4.popupDistance;
            a5 = a4.popupOffset;
            a6 = a4.popupYOffset;
            bc = ba.data(aB) === "fixed";
            a7 = ba.outerHeight();
            aY = ba.outerWidth();
            bb = aY / 2;
            aO = bh.width();
            bd = bh.height();
            aQ = bh.scrollTop();
            bg = bh.scrollLeft();
            aS = a4.windowPadding;
            be = a8.offset();
            a9 = a8.outerWidth();
            aR = a8.outerHeight();
            aV = be.top - aQ;
            a2 = be.left + a9 / 2;
            aW = be.top - a7 + a6;
            aX = a7 + a4.popupDistance - a6;
            aZ = aV - aX;
            bf = bd - aV - aR - aX;
            a0 = be.left - aY - a5;
            bm = aO - be.left - a9 - aY;
            bj = a4.preferredPosition;
            if (bj === "left" || bj === "right") {
                a3 = 0;
                aW += aR / 2 + a7 / 2;
                if ((bj === "right" && bm > aS) || a0 < aS) {
                    ba.addClass(u);
                    a2 = be.left + a9 + a5
                } else {
                    ba.addClass(S);
                    a2 = be.left - aY - a5;
                    aL = -aL
                }
            } else {
                aL = 0;
                if (a2 + bb > aO - aS) {
                    a2 -= bb * 2 - a5;
                    ba.addClass(ak)
                } else {
                    if (a2 - bb < aS) {
                        a2 -= a5;
                        ba.addClass(ay)
                    } else {
                        a2 -= bb
                    }
                }
                if (a2 < aS) {
                    a2 = aS
                }
                if ((bj === "bottom" && bf > aS) || aZ < aS) {
                    a3 = -a3;
                    aW += a7 + aR - 2 * a6;
                    ba.addClass(a)
                }
            }
            if (a7 < aR) {
                bl = aW + a7 + aS - a3 + a6 - aQ - bd;
                if (bl > 0) {
                    aW = Math.max(aW - bl - aS, be.top + a6 + aS + a3)
                }
            }
            if (aY < a9) {
                a1 = a2 + aY + aS + aL + a5 - bg - aO;
                if (a1 > 0) {
                    a2 = Math.max(a2 - a1 + aS, be.left + a5 + aS - aL)
                }
            }
            if (a4.hideTrigger) {
                a8.stop(true).fadeTo(a4.triggerAnimationSpeed, 0)
            }
            bn = 0;
            if (!aU[an] || a4.cssAnimations.enabled) {
                aW -= a3;
                a2 += aL;
                aL = a3 = 0;
                bn = 1
            }
            if (bc) {
                a2 -= bg;
                aW -= aQ
            }
            ba.data(O, aL).data(aG, a3).css({
                top: aW,
                left: a2,
                display: "block",
                opacity: bn
            });
            bk.push(N(ba, {
                top: "-=" + a3,
                left: "+=" + aL,
                opacity: 1
            }))
        }
        return bk
    };
    t = function() {
        return g(false)
    };
    N = function(aM, aL) {
        var aN, aO;
        aN = ((aO = T(aM.data(x)).data(v)) != null ? aO.options : void 0) || am.defaults;
        if (aN.cssAnimations.enabled) {
            aM.addClass(aN.cssAnimations.show);
            return window.setTimeout(function() {
                return r(aM, aN)
            }, aN.popupAnimationSpeed)
        } else {
            return aM.stop(true).animate(aL, aN.popupAnimationSpeed, aN.funcEase, function() {
                return r(aM, aN)
            })
        }
    };
    r = function(aM, aN) {
        var aL;
        aL = aM.data();
        if (aL[an]) {
            aM.data(an, false);
            return typeof aN.onAfterShow === "function" ? aN.onAfterShow(T(aL[x])) : void 0
        }
    };
    az = function(aN, aT) {
        var aR, aP, aM, aV, aQ, aU, aS, aL, aO;
        if (aT == null) {
            aT = ""
        }
        aL = aN.data(v);
        aO = aL.options;
        aM = aL.popupInstance;
        if (!aM.data(aq)) {
            return
        }
        aU = aM.data(x);
        if (aU) {
            aR = T(aU);
            if (aR.length) {
                aP = aR.data(v).options || am.defaults;
                if (aP.hideTrigger) {
                    aR.stop(true).fadeTo(aP.fadeSpeed, 1)
                }
            }
        }
        if (aO.tourHighlight && aO.tourIndex) {
            aS = U().css({
                backgroundColor: aO.tourHighlightColor,
                zIndex: aO.tourHighlightZIndex
            });
            z();
            if (aN.css("position") === "static") {
                aN.css("position", "relative")
            }
            if (!aN.data(n)) {
                aN.data(n, aN.css("zIndex"))
            }
            aN.css("zIndex", aO.tourHighlightZIndex + 1);
            aS.fadeTo(aO.tourHighlightFadeDuration, aO.tourHighlightOpacity)
        } else {
            if (ac) {
                Q(aO)
            }
        }
        aV = aT || aL.hint;
        if (aO.referencedContent && !aT) {
            aV = ar(aO.referencedContent).clone(true, true) || aV
        }
        aQ = e(aN) ? "fixed" : "absolute";
        if (aU !== aL.id) {
            aM.hide(0)
        }
        aM.data(an, true).data(x, aL.id).data(aB, aQ).find("." + o).empty().append(aV);
        aM.css("position", aQ);
        return ao(0)
    };
    e = function(aL) {
        var aM;
        aM = aL;
        while (aM.length && aM[0].nodeName.toUpperCase() !== "HTML") {
            if (aM.css("position") === "fixed") {
                return true
            }
            aM = aM.parent()
        }
        return false
    };
    at = function() {
        var aQ, aL, aN, aM, aP, aO;
        aM = aL = ar(this);
        aQ = aM.hasClass(c);
        if (!aQ) {
            aM = T(aL.data(x))
        }
        if (!aM.length) {
            return
        }
        aP = aM.data(v);
        aL = aP.popupInstance.data((aQ ? aq : h), true);
        ap(aL);
        aN = aL.data(x);
        if (aN !== aP.id || aL.css("opacity") === 0) {
            if (typeof(aO = aP.options).onBeforeShow === "function") {
                aO.onBeforeShow(aM)
            }
            return aL.data(f, setTimeout(function() {
                return az(aM)
            }, aP.options.popupDelay))
        }
    };
    ax = function() {
        var aQ, aM, aL, aN, aP, aO;
        aN = aM = ar(this);
        aQ = aN.hasClass(c);
        if (!aQ) {
            aN = T(aM.data(x))
        }
        if (!aN.length) {
            return
        }
        aP = aN.data(v);
        aM = aP.popupInstance.data((aQ ? aq : h), false);
        ap(aM);
        aL = aM.data();
        if (!(aL[h] || aL[aq])) {
            if (typeof(aO = aP.options).onBeforeHide === "function") {
                aO.onBeforeHide(aN)
            }
            return aM.data(ah, setTimeout(function() {
                return ab(aM)
            }, aP.options.hideDelay))
        }
    };
    J = function(aL) {
        clearTimeout(i);
        return i = setTimeout(t, 250)
    };
    E = function(aN, aP) {
        var aM, aL, aO;
        if (!(aN != null ? aN.length : void 0)) {
            return
        }
        aO = aN.data(v);
        aM = aO.tourTitle;
        if (aM) {
            aL = aO.popupInstance.find("." + V)
        } else {
            aL = aO.popupInstance.find("." + o)
        }
        if (aL.html() !== aP) {
            return aL.stop(true).fadeTo(aO.options.contentAnimationSpeed, 0, function() {
                ar(this).html(aP).fadeTo(aO.options.contentAnimationSpeed, 1);
                return g()
            })
        }
    };
    y = function(aM, aQ) {
        var aP, aN, aL, aO, aS, aR;
        aO = aM.data(v);
        aL = aO != null ? aO.tourTitle : void 0;
        if (!(aL && q[aL])) {
            return
        }
        q[aL].sort(function(aU, aT) {
            return aU.index - aT.index
        });
        if (!(typeof aQ === "number" && aQ % 1 === 0)) {
            aQ = -1
        } else {
            aQ -= 1
        }
        aJ = aL;
        aP = q[aL];
        for (aN = aS = 0, aR = aP.length - 1; 0 <= aR ? aS <= aR : aS >= aR; aN = 0 <= aR ? ++aS : --aS) {
            if ((aQ >= 0 && aN === aQ) || (aQ < 0 && aP[aN].id === aO.id)) {
                return F(aL, aN)
            }
        }
    };
    F = function(aS, aP) {
        var aM, aR, aQ, aN, aO, aT, aL;
        aQ = q[aS];
        if (!aQ) {
            return
        }
        aR = aQ[aP].trigger;
        aL = aR.data(v);
        aT = aL.options;
        aO = aT.tourNavigationEnabled;
        aN = "";
        if (aO) {
            aN += ("<div class='" + aE + "'>") + ("" + (aP + 1) + " " + aT.labels.of + " " + aQ.length + "</div>");
            if (aP > 0) {
                aN += "<a href='#' class='" + K + "'>" + aT.labels.prev + "</a>"
            }
            if (aP < aQ.length - 1) {
                aN += "<a href='#' class='" + aj + "'>" + aT.labels.next + "</a>"
            }
        }
        if (!aO || aP === aQ.length - 1) {
            aN += "<a href='#' class='" + j + "'>" + aT.labels.close + "</a>"
        }
        aM = ar(("<div class='" + V + "'/>") + ("<a href='#' class='" + B + "'>&Chi;</a>") + ("<div class='" + R + "'>" + aN + "</div>"));
        aM.eq(0).append(aL.hint);
        ap(aL.popupInstance);
        aL.popupInstance.data(aq, true);
        return ai(aR, aM)
    };
    ai = function(aL, aN) {
        var aP, aM, aO, aQ;
        aM = aL.offset().top;
        aP = aM - w.scrollTop();
        aQ = P.height();
        aO = aL.data(v).options;
        if (!e(aL) && (aP < aO.autoscrollPadding || aP > aQ - aO.autoscrollPadding)) {
            return ar("html, body").animate({
                scrollTop: aM - aQ / 2
            }, 800, "swing", function() {
                return az(aL, aN)
            })
        } else {
            return az(aL, aN)
        }
    };
    aA = function(aR) {
        var aS, aN, aM, aL, aQ, aP, aO;
        if (aR != null) {
            aR.preventDefault()
        }
        aN = q[aJ];
        if (!aN) {
            return
        }
        aS = aN[0].popupInstance;
        aL = aS.data(x) || aN[0].id;
        for (aM = aP = 0, aO = aN.length - 2; 0 <= aO ? aP <= aO : aP >= aO; aM = 0 <= aO ? ++aP : --aP) {
            if (!(aN[aM].id === aL)) {
                continue
            }
            aQ = aN[aM].trigger.data(v).options;
            if (aQ.tourNavigationEnabled) {
                if (typeof aQ.onTourNext === "function") {
                    aQ.onTourNext(aN[aM + 1].trigger)
                }
                return F(aJ, aM + 1)
            }
        }
    };
    ae = function(aR) {
        var aS, aN, aM, aL, aQ, aP, aO;
        if (aR != null) {
            aR.preventDefault()
        }
        aN = q[aJ];
        if (!aN) {
            return
        }
        aS = aN[0].popupInstance;
        aL = aS.data(x) || aN[0].id;
        for (aM = aP = 1, aO = aN.length - 1; 1 <= aO ? aP <= aO : aP >= aO; aM = 1 <= aO ? ++aP : --aP) {
            if (!(aN[aM].id === aL)) {
                continue
            }
            aQ = aN[aM].trigger.data(v).options;
            if (aQ.tourNavigationEnabled) {
                if (typeof aQ.onTourPrev === "function") {
                    aQ.onTourPrev(aN[aM - 1].trigger)
                }
                return F(aJ, aM - 1)
            }
        }
    };
    Y = function(aL) {
        var aM;
        if (aL != null) {
            aL.preventDefault()
        }
        aM = ar(aL.target).closest("." + av);
        return ab(aM)
    };
    d = function(aL) {
        return aL.each(function() {
            var aN, aM;
            aM = ar(this);
            aN = aM.data(v);
            if (aN) {
                return aM.unbind("." + v).data(v, {}).removeClass(H)
            }
        })
    };
    D = function(aQ) {
        var aM, aN, aO, aP, aL;
        aO = (aP = aQ != null ? aQ.target.tagName.toLowerCase() : void 0) === "input" || aP === "textarea";
        switch (aQ.which) {
            case 27:
                aL = [];
                for (aN in W) {
                    aM = W[aN];
                    aL.push(ab(aM))
                }
                return aL;
                break;
            case 37:
                if (!aO) {
                    return ae()
                }
                break;
            case 39:
                if (!aO) {
                    return aA()
                }
        }
    };
    L = function(aN, aM) {
        var aL;
        if (aN == null) {
            aN = "default"
        }
        if (aM == null) {
            aM = false
        }
        if (W[aN]) {
            return W[aN]
        }
        aL = ar(aD).css("opacity", 0).attr("id", "" + (v + M++)).addClass(av).data(O, 0).data(aG, 0).data(b, aM).bind(k, at).bind(af, ax);
        ar("body").append(aL);
        if (aM) {
            aL.delegate("." + K, aa, ae).delegate("." + aj, aa, aA).delegate("." + j + ", ." + B, aa, Y)
        } else {
            aL.delegate("a", aa, ab)
        }
        if (M === 2) {
            w.bind("" + aa + " " + ad, ab);
            P.bind(C, ao).bind(aC, J).bind(ag, D)
        }
        return W[aN] = aL
    };
    return ar.fn.smallipop = function(aL, aN) {
        var aM;
        if (aL == null) {
            aL = {}
        }
        if (aN == null) {
            aN = ""
        }
        if (this.length === 0) {
            return this
        }
        if (typeof aL === "string") {
            switch (aL.toLowerCase()) {
                case "show":
                    aw.call(this.first().get(0));
                    break;
                case "hide":
                    ab(this.first().get(0));
                    break;
                case "destroy":
                    d(this);
                    break;
                case "tour":
                    y(this.first(), aN);
                    break;
                case "update":
                    E(this.first(), aN)
            }
            return this
        }
        aL = ar.extend(true, {}, am.defaults, aL);
        if (!aF) {
            aL.cssAnimations.enabled = false
        }
        aM = L(aL.popupId);
        return this.each(function() {
            var aQ, a2, aV, aS, a3, aX, aP, aR, aZ, aU, aO, aY, aT, aW, a0, a1;
            a2 = ar(this);
            aR = a2[0].tagName.toLowerCase();
            a0 = a2.attr("type");
            aO = a2.data();
            a3 = aN || a2.attr("title");
            aQ = ar("> ." + aL.infoClass + ":first", a2);
            if (aQ.length) {
                a3 = aQ.clone(true, true).removeClass(aL.infoClass)
            }
            if (a3 && !a2.hasClass(c)) {
                aS = X++;
                aY = {};
                aW = aM;
                aT = ar.extend(true, {}, aL);
                if (typeof aO[v] === "object") {
                    ar.extend(true, aT, aO[v])
                }
                for (aX in aO) {
                    a1 = aO[aX];
                    if (!(aX.indexOf(v) >= 0)) {
                        continue
                    }
                    aP = aX.replace(v, "");
                    if (aP) {
                        aP = aP.substr(0, 1).toLowerCase() + aP.substr(1);
                        aT[aP] = a1
                    }
                }
                aV = aT.handleInputs && (aR === "input" || aR === "select" || aR === "textarea");
                if (aT.tourIndex) {
                    aU = aT.tourTitle || "defaultTour";
                    aT.hideOnTriggerClick = aT.hideOnPopupClick = false;
                    aW = L(aU, true);
                    if (!q[aU]) {
                        q[aU] = []
                    }
                    q[aU].push({
                        index: aT.tourIndex || 0,
                        id: aS,
                        trigger: a2,
                        popupInstance: aW
                    })
                } else {
                    aZ = aT.touchSupport && l;
                    if (aV) {
                        aT.hideOnTriggerClick = false;
                        aY[A] = at;
                        aY[G] = ax
                    } else {
                        if (!aZ) {
                            aY[af] = ax
                        }
                    }
                    if (aT.triggerOnClick || aZ) {
                        aY[aa] = aw
                    } else {
                        aY[aa] = ax;
                        aY[k] = at
                    }
                }
                a2.addClass("" + c + " " + v + aS).attr("title", "").data(v, {
                    id: aS,
                    hint: a3,
                    options: aT,
                    tagName: aR,
                    type: a0,
                    tourTitle: aU,
                    popupInstance: aW,
                    isFormElement: aV
                }).bind(aY);
                if (!aT.hideOnTriggerClick) {
                    return a2.delegate("a", aa, ab)
                }
            }
        })
    }
});